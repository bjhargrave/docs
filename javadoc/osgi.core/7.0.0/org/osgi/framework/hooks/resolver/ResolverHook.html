<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_152) on Thu Feb 01 16:11:15 EST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ResolverHook (OSGi Core Release 7)</title>
<meta name="date" content="2018-02-01">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ResolverHook (OSGi Core Release 7)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ResolverHook.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>OSGi&trade; Core</b><br/>Release 7</div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHookFactory.html" title="interface in org.osgi.framework.hooks.resolver"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/osgi/framework/hooks/resolver/ResolverHook.html" target="_top">Frames</a></li>
<li><a href="ResolverHook.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.osgi.framework.hooks.resolver</div>
<h2 title="Interface ResolverHook" class="title">Interface ResolverHook</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="../../../../../../../osgi.annotation/7.0.0/org/osgi/annotation/versioning/ConsumerType.html?is-external=true" title="class or interface in org.osgi.annotation.versioning">@ConsumerType</a>
public interface <span class="typeNameLabel">ResolverHook</span></pre>
<div class="block">OSGi Framework Resolver Hook instances are obtained from the OSGi
 <a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHookFactory.html" title="interface in org.osgi.framework.hooks.resolver"><code>Framework Resolver Hook Factory</code></a> service.
 
 <p>
 A Resolver Hook instance is called by the framework during a resolve process.
 A resolver hook may influence the outcome of a resolve process by removing
 entries from shrinkable collections that are passed to the hook during a
 resolve process. A shrinkable collection is a <code>Collection</code> that
 supports all remove operations. Any other attempts to modify a shrinkable
 collection will result in an <code>UnsupportedOperationException</code> being
 thrown.
 
 <p>
 The following steps outline the way a framework uses the resolver hooks
 during a resolve process.
 <ol>
 <li>Collect a snapshot of registered resolver hook factories that will be
 called during the current resolve process. Any hook factories registered
 after the snapshot is taken must not be called during the current resolve
 process. A resolver hook factory contained in the snapshot may become
 unregistered during the resolve process. The framework should handle this and
 stop calling the resolver hook instance provided by the unregistered hook
 factory and the current resolve process must fail. If possible, an exception
 must be thrown to the caller of the API which triggered the resolve process.
 In cases where the caller is not available a framework event of type error
 should be fired.</li>
 <li>For each registered hook factory call the
 <a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHookFactory.html#begin-java.util.Collection-"><code>ResolverHookFactory.begin(Collection)</code></a> method to inform the hooks
 about a resolve process beginning and to obtain a Resolver Hook instance that
 will be used for the duration of the resolve process.</li>
 
 <li>Determine the collection of unresolved bundle revisions that may be
 considered for resolution during the current resolution process and place
 each of the bundle revisions in a shrinkable collection <code>Resolvable</code>.
 For each resolver hook call the <a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHook.html#filterResolvable-java.util.Collection-"><code>filterResolvable(Collection)</code></a> method
 with the shrinkable collection <code>Resolvable</code>.</li>
 <li>The shrinkable collection <code>Resolvable</code> now contains all the
 unresolved bundle revisions that may end up as resolved at the end of the
 current resolve process. Any other bundle revisions that got removed from the
 shrinkable collection <code>Resolvable</code> must not end up as resolved at the
 end of the current resolve process.</li>
 <li>For each bundle revision <code>B</code> left in the shrinkable collection
 <code>Resolvable</code> and any bundle revision <code>B</code> which is currently
 resolved that represents a singleton bundle do the following:
 <ul>
 <li>Determine the collection of available capabilities that have a namespace
 of <a href="../../../../../org/osgi/framework/namespace/IdentityNamespace.html" title="class in org.osgi.framework.namespace"><code>osgi.identity</code></a>, are singletons, and have the same
 symbolic name as the singleton bundle revision <code>B</code> and place each of
 the matching capabilities into a shrinkable collection <code>Collisions</code>.</li>
 <li>Remove the <a href="../../../../../org/osgi/framework/namespace/IdentityNamespace.html" title="class in org.osgi.framework.namespace"><code>osgi.identity</code></a> capability provided by
 bundle revision <code>B</code> from shrinkable collection <code>Collisions</code>. A
 singleton bundle cannot collide with itself.</li>
 <li>For each resolver hook call the
 <a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHook.html#filterSingletonCollisions-org.osgi.framework.wiring.BundleCapability-java.util.Collection-"><code>filterSingletonCollisions(BundleCapability, Collection)</code></a> with the
 <a href="../../../../../org/osgi/framework/namespace/IdentityNamespace.html" title="class in org.osgi.framework.namespace"><code>osgi.identity</code></a> capability provided by bundle
 revision <code>B</code> and the shrinkable collection <code>Collisions</code></li>
 <li>The shrinkable collection <code>Collisions</code> now contains all singleton
 <a href="../../../../../org/osgi/framework/namespace/IdentityNamespace.html" title="class in org.osgi.framework.namespace"><code>osgi.identity</code></a> capabilities that can influence the
 ability of bundle revision <code>B</code> to resolve.</li>
 <li>If the bundle revision <code>B</code> is already resolved then any resolvable
 bundle revision contained in the collection <code>Collisions</code> is not allowed
 to resolve.</li>
 </ul>
 </li>
 <li>During a resolve process a framework is free to attempt to resolve any or
 all bundles contained in shrinkable collection <code>Resolvable</code>. For each
 bundle revision <code>B</code> left in the shrinkable collection
 <code>Resolvable</code> which the framework attempts to resolve the following
 steps must be followed:
 <ul>
 <li>For each requirement <code>R</code> specified by bundle revision <code>B</code>
 determine the collection of capabilities that satisfy (or match) the
 requirement and place each matching capability into a shrinkable collection
 <code>Candidates</code>. A capability is considered to match a particular
 requirement if its attributes satisfy a specified requirement and the
 requirer bundle has permission to access the capability.</li>
 <li>For each resolver hook call the
 <a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHook.html#filterMatches-org.osgi.framework.wiring.BundleRequirement-java.util.Collection-"><code>filterMatches(BundleRequirement, Collection)</code></a> with the requirement
 <code>R</code> and the shrinkable collection <code>Candidates</code>.</li>
 <li>The shrinkable collection <code>Candidates</code> now contains all the
 capabilities that may be used to satisfy the requirement <code>R</code>. Any other
 capabilities that got removed from the shrinkable collection
 <code>Candidates</code> must not be used to satisfy requirement <code>R</code>.</li>
 </ul>
 </li>
 <li>For each resolver hook call the <a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHook.html#end--"><code>end()</code></a> method to inform the hooks
 about a resolve process ending.</li>
 </ol>
 In all cases, the order in which the resolver hooks are called is the reverse
 compareTo ordering of their Service References. That is, the service with the
 highest ranking number must be called first. In cases where a shrinkable
 collection becomes empty the framework is required to call the remaining
 registered hooks.
 <p>
 Resolver hooks are low level. Implementations of the resolver hook must be
 careful not to create an unresolvable state which is very hard for a
 developer or a provisioner to diagnose. Resolver hooks also must not be
 allowed to start another synchronous resolve process (e.g. by calling
 <a href="../../../../../org/osgi/framework/Bundle.html#start--"><code>Bundle.start()</code></a> or <a href="../../../../../org/osgi/framework/wiring/FrameworkWiring.html#resolveBundles-java.util.Collection-"><code>FrameworkWiring.resolveBundles(Collection)</code></a>
 ). The framework must detect this and throw an <code>IllegalStateException</code>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHookFactory.html" title="interface in org.osgi.framework.hooks.resolver"><code>ResolverHookFactory</code></a></dd>
<dt><span class="simpleTagLabel">"NotThreadSafe"</span></dt>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHook.html#end--">end</a></span>()</code>
<div class="block">This method is called once at the end of the resolve process.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHook.html#filterMatches-org.osgi.framework.wiring.BundleRequirement-java.util.Collection-">filterMatches</a></span>(<a href="../../../../../org/osgi/framework/wiring/BundleRequirement.html" title="interface in org.osgi.framework.wiring">BundleRequirement</a>&nbsp;requirement,
             java.util.Collection&lt;<a href="../../../../../org/osgi/framework/wiring/BundleCapability.html" title="interface in org.osgi.framework.wiring">BundleCapability</a>&gt;&nbsp;candidates)</code>
<div class="block">Filter matches hook method.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHook.html#filterResolvable-java.util.Collection-">filterResolvable</a></span>(java.util.Collection&lt;<a href="../../../../../org/osgi/framework/wiring/BundleRevision.html" title="interface in org.osgi.framework.wiring">BundleRevision</a>&gt;&nbsp;candidates)</code>
<div class="block">Filter resolvable candidates hook method.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHook.html#filterSingletonCollisions-org.osgi.framework.wiring.BundleCapability-java.util.Collection-">filterSingletonCollisions</a></span>(<a href="../../../../../org/osgi/framework/wiring/BundleCapability.html" title="interface in org.osgi.framework.wiring">BundleCapability</a>&nbsp;singleton,
                         java.util.Collection&lt;<a href="../../../../../org/osgi/framework/wiring/BundleCapability.html" title="interface in org.osgi.framework.wiring">BundleCapability</a>&gt;&nbsp;collisionCandidates)</code>
<div class="block">Filter singleton collisions hook method.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="filterResolvable-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filterResolvable</h4>
<pre>void&nbsp;filterResolvable(java.util.Collection&lt;<a href="../../../../../org/osgi/framework/wiring/BundleRevision.html" title="interface in org.osgi.framework.wiring">BundleRevision</a>&gt;&nbsp;candidates)</pre>
<div class="block">Filter resolvable candidates hook method. This method may be called
 multiple times during a single resolve process. This method can filter
 the collection of candidates by removing potential candidates. Removing a
 candidate will prevent the candidate from resolving during the current
 resolve process.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>candidates</code> - the collection of resolvable candidates available
        during a resolve process.</dd>
</dl>
</li>
</ul>
<a name="filterSingletonCollisions-org.osgi.framework.wiring.BundleCapability-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filterSingletonCollisions</h4>
<pre>void&nbsp;filterSingletonCollisions(<a href="../../../../../org/osgi/framework/wiring/BundleCapability.html" title="interface in org.osgi.framework.wiring">BundleCapability</a>&nbsp;singleton,
                               java.util.Collection&lt;<a href="../../../../../org/osgi/framework/wiring/BundleCapability.html" title="interface in org.osgi.framework.wiring">BundleCapability</a>&gt;&nbsp;collisionCandidates)</pre>
<div class="block">Filter singleton collisions hook method. This method is called during the
 resolve process for the specified singleton. The specified singleton
 represents a singleton capability and the specified collection represent
 a collection of singleton capabilities which are considered collision
 candidates. The singleton capability and the collection of collision
 candidates must all use the same namespace.
 <p>
 Currently only capabilities with the namespace of <a href="../../../../../org/osgi/framework/namespace/BundleNamespace.html" title="class in org.osgi.framework.namespace"><code>osgi.wiring.bundle</code></a> and <a href="../../../../../org/osgi/framework/namespace/IdentityNamespace.html" title="class in org.osgi.framework.namespace"><code>osgi.identity</code></a> can be
 singletons. The collision candidates will all have the same namespace, be
 singletons, and have the same symbolic name as the specified singleton
 capability.
 <p>
 In the future, capabilities in other namespaces may support the singleton
 concept. Hook implementations should be prepared to receive calls to this
 method for capabilities in namespaces other than <a href="../../../../../org/osgi/framework/namespace/BundleNamespace.html" title="class in org.osgi.framework.namespace"><code>osgi.wiring.bundle</code></a> or <a href="../../../../../org/osgi/framework/namespace/IdentityNamespace.html" title="class in org.osgi.framework.namespace"><code>osgi.identity</code></a>.
 <p>
 This method can filter the list of collision candidates by removing
 potential collisions. Removing a collision candidate will allow the
 specified singleton to resolve regardless of the resolution state of the
 removed collision candidate.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>singleton</code> - the singleton involved in a resolve process</dd>
<dd><code>collisionCandidates</code> - a collection of singleton collision candidates</dd>
</dl>
</li>
</ul>
<a name="filterMatches-org.osgi.framework.wiring.BundleRequirement-java.util.Collection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filterMatches</h4>
<pre>void&nbsp;filterMatches(<a href="../../../../../org/osgi/framework/wiring/BundleRequirement.html" title="interface in org.osgi.framework.wiring">BundleRequirement</a>&nbsp;requirement,
                   java.util.Collection&lt;<a href="../../../../../org/osgi/framework/wiring/BundleCapability.html" title="interface in org.osgi.framework.wiring">BundleCapability</a>&gt;&nbsp;candidates)</pre>
<div class="block">Filter matches hook method. This method is called during the resolve
 process for the specified requirement. The collection of candidates match
 the specified requirement. This method can filter the collection of
 matching candidates by removing candidates from the collection. Removing
 a candidate will prevent the resolve process from choosing the removed
 candidate to satisfy the requirement.
 <p>
 All of the candidates will have the same namespace and will match the
 specified requirement.
 <p>
 If the Java Runtime Environment supports permissions then the collection
 of candidates will only contain candidates for which the requirer has
 permission to access.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>requirement</code> - the requirement to filter candidates for</dd>
<dd><code>candidates</code> - a collection of candidates that match the requirement</dd>
</dl>
</li>
</ul>
<a name="end--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>end</h4>
<pre>void&nbsp;end()</pre>
<div class="block">This method is called once at the end of the resolve process. After the
 end method is called the resolve process has ended. The framework must
 not hold onto this resolver hook instance after end has been called.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ResolverHook.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>OSGi&trade; Core</b><br/>Release 7</div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../org/osgi/framework/hooks/resolver/ResolverHookFactory.html" title="interface in org.osgi.framework.hooks.resolver"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/osgi/framework/hooks/resolver/ResolverHook.html" target="_top">Frames</a></li>
<li><a href="ResolverHook.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; OSGi Alliance (2000, 2018). All Rights Reserved. Licensed under the <a href="../../../../../LICENSE.html">OSGi Specification License, Version 2.0</a></small></p>
</body>
</html>
